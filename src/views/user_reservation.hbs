<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>예약 현황</title>
		<!-- Bootstrap CSS -->
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
			rel="stylesheet"
		/>
		<style>
			body { font-family: Arial, sans-serif; } .container { margin-top:
			30px; } .table th { background-color: #f8f9fa; font-weight: bold; }
			.no-data { text-align: center; font-size: 1.2rem; color: #6c757d;
			}.navbar-custom { background-color: #f8f9fa; border-bottom: 1px
			solid #e5e5e5; }.user-info { font-size: 1.2rem; font-weight: bold;
			}.navbar-custom a.navbar-brand { text-decoration: none; color:
			#343a40; /* 어두운 색상 */ display: flex; align-items: center;
			font-size: 1rem;} .navbar-custom a.navbar-brand:hover { color:
			#0d6efd; /* 파란색으로 변경 */} .navbar-custom .fs-1 { font-size:
			2rem; /* 화살표 크기 조정 */ margin-right: 10px; }
            td {
                vertical-align: middle; /* 수직 가운데 정렬 */
                text-align: center; /* 텍스트 가운데 정렬 (선택) */
            }

            /* 폼 내부 버튼 간격 조정 */
            form button {
                margin: 0 5px; /* 버튼 사이 여백 추가 */
            }

            /* 입력 필드 크기 조정 */
            form .form-control {
                height: auto; /* 필요에 따라 높이 자동 조정 */
                margin: 0; /* 테이블 레이아웃 유지 */
            }
		</style>
	</head>
	<body>
		<!-- Navigation Bar -->
		<nav class="navbar navbar-expand-lg navbar-custom">
			<div class="container-fluid">
				<!-- User Info -->
				<div class="d-flex align-items-center user-info">
					<a href="/main" class="navbar-brand">
						<span class="me-2" style="">←</span>
					</a>
					<span id="user-name">{{user.name}} 님 예약 현황 ✅</span>
				</div>
			</div>
		</nav>
		<div class="container">

			<!-- 예약 현황 표 -->
			{{#if reservations.length}}
				<table class="table table-bordered table-striped text-center">
					<thead>
						<tr>
							<th>예약 ID</th>
							<th>ISBN</th>
							<th>제목</th>
                            <th>수량</th>
							<th>예약일</th>
							<th>픽업 날짜</th>
							<th>상태</th>
							<th>수정</th>
							<th>삭제</th>
						</tr>
					</thead>
					<tbody>
						{{#each reservations}}
							<tr>
								<form method="post">
                                    <td style="display:none;"><input 
                                            type="text"
                                            name="ID"
                                            class="form-control"
                                            value="{{ID}}"
                                        /></td>
									<td>{{ID}}</td>
                                    <td style="display:none;"><input 
                                            type="text"
                                            name="ISBN"
                                            class="form-control"
                                            value="{{ISBN}}"
                                        /></td>
									<td>{{ISBN}}</td>
									<td>{{Title}}</td>
                                    <td style="display:none;"><input 
                                            type="text"
                                            name="Number"
                                            class="form-control"
                                            value="{{Number}}"
                                        /></td>
									<td>{{Number}}</td>
									<td>{{Reservation_date}}</td>
									<td><input {{#if (eq status "confirmed")}} style="outline: none; box-shadow: none; border:none;background-color: transparent;" {{/if}}
												type="datetime-local"
												name="Pickup_time_modify"
												class="form-control"
												value="{{Pickup_time}}"
												{{#if (eq status "confirmed")}} readonly {{/if}}
											/>
									<td>
										{{#if (eq status "confirmed")}}
											<span
												class="badge bg-success"
											>확정됨</span>
										{{else if (eq status "pending")}}
											<span class="badge bg-warning">대기
												중</span>
										{{else}}
											<span
												class="badge bg-danger"
											>취소됨</span>
										{{/if}}
									</td>
									<td>
										<button
											type="submit"
											class="btn btn-warning"
											formaction="/main/reservation/pickupTimeModify"
										>수정</button>
									</td>
									<td>
										<button
											type="submit"
											class="btn btn-danger"
											formaction="/main/reservation/delete"
										>삭제</button>
									</td>
								</form>
							</tr>
						{{/each}}
					</tbody>
				</table>
				<!-- Pagination -->
				<nav
					aria-label="Page navigation"
					class="d-flex justify-content-center mt-4"
				>
					<ul class="pagination">
						<li class="page-item">
							<a
								class="page-link"
								href="/main/reservation?page=1"
							>&laquo;</a>
						</li>
						<li class="page-item">
							<a
								class="page-link"
								href="/main/reservation?page={{pageInfo.prevPage}}"
							>이전</a>
						</li>
						{{#each Page}}
							<li class="page-item">
								<a
									class="page-link"
									href="/main/reservation?page={{this}}"
								>{{this}}</a>
							</li>
						{{/each}}
						<li class="page-item">
							<a
								class="page-link"
								href="/main/reservation?page={{pageInfo.nextPage}}"
							>다음</a>
						</li>
						<li class="page-item">
							<a
								class="page-link"
								href="/main/reservation?page={{pageInfo.totalPages}}"
							>&raquo;</a>
						</li>
					</ul>
				</nav>
			{{else}}
				<p class="no-data">현재 예약된 책이 없습니다.</p>
			{{/if}}
		</div>

		<!-- Bootstrap JS -->
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
		>
		</script>
	</body>
</html>